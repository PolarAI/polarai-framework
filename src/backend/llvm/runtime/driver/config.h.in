#pragma once

#include <vector>
#include <string>

constexpr static auto HasOpenCL = @ATH_HAS_OPENCL@;
constexpr static auto HasSYCL = @ATH_HAS_SYCL@;
constexpr static auto HasCUDA = @POLAR_HAS_CUDA@;
constexpr static auto HasHIP = @POLAR_HAS_HIP@;
constexpr static auto HasVulkan = @POLAR_HAS_VULKAN@;
constexpr static auto HasMetal = @POLAR_HAS_METAL@;

inline std::vector<std::string> getListOfLibraries() {
  std::vector<std::string> libraries;

  if constexpr (HasSYCL) {
    // fixme find a better way to extract libnames
    libraries.emplace_back("lib@ATH_RT_LLVM_SYCL@.so");
  }
  if constexpr (HasCUDA) {
    // fixme find a better way to extract libnames
    libraries.emplace_back("lib@POLAR_RT_LLVM_CUDA@.so");
  }
  if constexpr (HasHIP) {
    // fixme find a better way to extract libnames
    libraries.emplace_back("lib@POLAR_RT_LLVM_HIP@.so");
  }
  if constexpr (HasVulkan) {
    // fixme find a better way to extract libnames
    libraries.emplace_back("lib@POLAR_RT_LLVM_VULKAN@.so");
  }
  if constexpr (HasMetal) {
    // fixme find a better way to extract libnames
    libraries.emplace_back("lib@POLAR_RT_LLVM_METAL@.dylib");
  }
  // temporarily disable OpenCL
  if constexpr (/*HasOpenCL*/ false) {
    // fixme find a better way to extract libnames
    libraries.emplace_back("lib@ATH_RT_LLVM_OCL@.so");
  }

  return libraries;
}    
